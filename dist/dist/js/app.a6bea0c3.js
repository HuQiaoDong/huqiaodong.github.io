(function(t){function s(s){for(var e,i,r=s[0],c=s[1],l=s[2],d=0,g=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&g.push(a[i][0]),a[i]=0;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(t[e]=c[e]);u&&u(s);while(g.length)g.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,s=0;s<o.length;s++){for(var n=o[s],e=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(e=!1)}e&&(o.splice(s--,1),t=i(i.s=n[0]))}return t}var e={},a={app:0},o=[];function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,s,n){i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,s){if(1&s&&(t=i(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)i.d(n,e,function(s){return t[s]}.bind(null,e));return n},i.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(s,"a",s),s},i.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},i.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=s,r=r.slice();for(var l=0;l<r.length;l++)s(r[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,s,n){t.exports=n("56d7")},"0e08":function(t,s,n){"use strict";n.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"custom-classes-transition","leave-active-class":"animated fadeOutDown"}},[e("div",{staticClass:"music-player"},[e("div",{staticClass:"mask",style:{backgroundImage:"url("+t.imgUrl+")"}}),e("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[t.lyric?t._e():e("div",{staticClass:"cover"},[e("img",{staticClass:"needle",attrs:{src:n("ce19"),alt:""}}),e("img",{staticClass:"cover-img rotate",class:{active:t.isPlay},attrs:{src:t.imgUrl,alt:""}}),e("img",{staticClass:"border",attrs:{src:n("de4e"),alt:""},on:{click:function(s){t.lyric=!t.lyric}}})])]),e("header",[e("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"},on:{click:function(s){return t.closeWindow()}}}),e("div",{staticClass:"song-info"},[e("div",{staticClass:"songTitle"},[e("h3",[t._v(t._s(t.songName))]),e("span")]),e("p",[t._v(t._s(t.songAuthor))])])]),e("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.lyric,expression:"lyric"}],staticClass:"lyric"},[e("div",{staticClass:"volume-controler"},[e("i",{staticClass:"fa fa-volume-up",on:{click:t.controlVolume}}),e("div",{staticClass:"control-bar"},[e("span",{staticClass:"progress"}),e("span",{staticClass:"dragPoint volume"})])]),e("div",{staticClass:"wrap",on:{click:function(s){t.lyric=!t.lyric}}},[e("ul",{staticClass:"scroll",style:{transform:"translateY("+50*-t.currentLyricIndex+"px)"}},t._l(t.parsedLyric,(function(s,n){return e("li",{key:n,staticClass:"lyricRow",class:{active:n===t.currentLyricIndex}},[t._v(t._s(s.text))])})),0)])])]),e("footer",[e("div",{staticClass:"k-bar"},[e("span",{staticClass:"currentProgress"},[t._v(t._s(t.progressBarData?t.progressBarData.currentMinute+":"+t.progressBarData.currentSecond:"00:00"))]),e("div",{staticClass:"progress-bar"},[e("div",{staticClass:"control-bar"},[e("span",{staticClass:"progress",style:{width:t.progressBarData?t.progressBarData.time+"px":""}}),e("span",{staticClass:"dragPoint process",style:{left:t.progressBarData?t.progressBarData.t+"px":""}})])]),e("span",{staticClass:"totalProgress"},[t._v(t._s(t.progressBarData?t.progressBarData.songMinute+":"+t.progressBarData.songSecond:"00:00"))])]),e("div",{staticClass:"play-control"},[e("img",{staticClass:"con",attrs:{src:t.playWayIcon,alt:""},on:{click:t.changePlayWay}}),e("img",{staticClass:"con",attrs:{src:n("9336"),alt:""},on:{click:t.lastSong}}),t.isPlay?e("img",{staticClass:"ppp",attrs:{src:n("40a3"),alt:""},on:{click:function(s){return t.playState()}}}):e("img",{staticClass:"ppp",attrs:{src:n("3f60"),alt:""},on:{click:function(s){return t.playState()}}}),e("img",{staticClass:"con",attrs:{src:n("b2f3"),alt:""},on:{click:t.nextSong}}),e("img",{staticClass:"con",attrs:{src:n("a4eb"),alt:""},on:{click:t.showList}})])])],1)])},a=[],o=(n("99af"),n("d81d"),n("a9e3"),n("ac1f"),n("466d"),n("841c"),n("1276"),{data:function(){return{playWayIcon:n("4c22"),p_ShowPlayList:this.showPlayList,lyric:!1,currentLyric:null,currentLyricIndex:"",progressBarData:"",p_PlayWay:1,p_SongIndex:this.songIndex}},props:["currentSong","show","imgUrl","songName","songAuthor","isPlay","showPlayList","playWay","songIndex","newSongsData"],methods:{controlVolume:function(){var t=document.querySelector("audio");t&&(t.muted=!t.muted)},closeWindow:function(){this.playerShow=!this.show,this.$emit("close",this.playerShow),document.body.style.overflow=""},getLyric:function(){var t=this,s=window.localStorage.getItem("lyric"+this.currentSong.id);s?this.currentLyric=s:(console.log("get"),window.axios.get("lyric",{params:{id:this.currentSong.id}}).then((function(s){t.currentLyric=s.data.lrc.lyric,console.log(t.currentLyric),window.localStorage.setItem("lyric"+t.currentSong.id,s.data.lrc.lyric)})))},changePlayWay:function(){switch(this.p_PlayWay>=3?this.p_PlayWay=1:this.p_PlayWay++,this.p_PlayWay){case 1:this.playWayIcon=n("4c22");break;case 2:this.playWayIcon=n("60ae");break;case 3:this.playWayIcon=n("a36d");break;default:break}this.$emit("change-play-way",this.p_PlayWay)},lastSong:function(){this.p_SongIndex<=0?this.p_SongIndex=this.newSongsData.length-1:this.p_SongIndex--,this.$emit("trans-song-index",this.p_SongIndex)},playState:function(){this.$parent.changePlayStatus()},nextSong:function(){this.p_SongIndex>=this.newSongsData.length-1?this.p_SongIndex=0:this.p_SongIndex++,this.$emit("trans-song-index",this.p_SongIndex)},showList:function(){this.p_ShowPlayList=!this.p_ShowPlayList,this.$emit("trans-list-state",this.p_ShowPlayList)}},computed:{parsedLyric:function(){return this.currentLyric?this.currentLyric.split("\n").map((function(t){var s=/\d{2}:\d{2}\.\d+/i;if(-1!==t.search(s)){var n,e=t.match(s)[0],a=e.substr(0,2),o=e.substr(3,2),i=e.substr(5);return 4==i.length?n=11:3==i.length&&(n=10),{time:60*Number(a)+Number(o)+Number(i),text:t.substr(n)||"---------"}}return{}})):null}},mounted:function(){var t=this;this.show?document.body.style.overflow="hidden":document.body.style.overflow="";var s=this.$parent.$el.querySelector("audio"),n=this.$el.getElementsByClassName("dragPoint"),e=this.$el.getElementsByClassName("control-bar"),a=this.$el.getElementsByClassName("progress");this.$el.style.height="100vh",console.log(n,a,e),a[0].style.width="100%",n[0].style.left="99%",e[0].onmousedown=function(t){var o=window.event||t;if(0==o.button){var i=e[0].offsetWidth/100,r=(o.pageX-e[0].offsetLeft)/i/100,c=100*r*i-n[0].offsetWidth/2;r<=1&&r>=0&&(s.volume=r,a[0].style.width=100*r*i+"px",n[0].style.left=c+"px")}},n[0].addEventListener("touchstart",(function(t){var o=t||window.event;console.log(o,"拖拽开始"),n[0].addEventListener("touchmove",(function(t){var o=t||window.event,i=o.targetTouches[0];t.preventDefault();var r=e[0].offsetWidth/100,c=(i.pageX-e[0].offsetLeft)/r/100,l=100*c*r-n[0].offsetWidth/2;c<=1&&c>=0&&(s.volume=c,a[0].style.width=100*c*r+"px",n[0].style.left=l+"px")})),n[1].addEventListener("touchend",(function(t){t||window.event;t.preventDefault()}))})),e[1].onmousedown=function(t){var o=window.event||t;if(console.log("click"),0==o.button){s.currentTime=(o.pageX-e[1].offsetParent.offsetLeft-e[1].offsetLeft)/e[1].offsetWidth*s.duration;var i=e[1].offsetWidth/100,r=s.currentTime/s.duration*100*i;a[1].style.width=r+"px",n[1].style.left=r-n[1].offsetWidth/2+"px"}},n[1].addEventListener("touchstart",(function(t){t||window.event;n[1].addEventListener("touchmove",(function(t){var a=t||window.event,o=a.targetTouches[0];n[1].style.transform="scale(1.3)",t.preventDefault(),console.log(o),s.currentTime=(o.pageX-e[1].offsetParent.offsetLeft-e[1].offsetLeft)/e[1].offsetWidth*s.duration,s.muted=!0})),n[1].addEventListener("touchend",(function(t){t||window.event;n[1].style.transform="scale(1)",t.preventDefault(),s.muted=!1}))})),s.addEventListener("timeupdate",(function(){if(t.parsedLyric){for(var o,i=0;i<t.parsedLyric.length;i++)if(s.currentTime+.15<t.parsedLyric[i].time){o=i-1;break}void 0===o&&(o=t.parsedLyric.length-1),t.currentLyricIndex=o}var r=e[1].offsetWidth/100,c=s.currentTime/s.duration*100*r;a[1].style.width=c+"px";var l=c-n[1].offsetWidth/2;n[1].style.left=l+"px";var u=Math.floor(s.currentTime/60),d=Math.floor(s.currentTime%60);u=Math.floor(s.currentTime/60)<10?"0"+u:u,d=Math.floor(s.currentTime%60)<10?"0"+d:d;var g=Math.floor(s.duration/60),f=Math.floor(s.duration%60);g=Math.floor(s.duration/60)<10?"0"+g:g,f=Math.floor(s.duration%60)<10?"0"+f:f,t.$el.querySelector(".currentProgress").innerHTML="".concat(u,":").concat(d),s.paused&&(t.progressBarData={currentMinute:u,currentSecond:d,songMinute:g,songSecond:f,time:c,t:l}),t.$el.querySelector(".totalProgress").innerHTML="".concat(g,":").concat(f)}))},created:function(){this.getLyric()},watch:{show:function(t){document.body.style.overflow=t?"hidden":"";var s=this.$parent.$el.querySelector("audio"),n=this.$el.getElementsByClassName("dragPoint"),e=this.$el.getElementsByClassName("control-bar"),a=this.$el.getElementsByClassName("progress"),o=e[1].offsetWidth/100,i=s.currentTime/s.duration*100*o;a[1].style.width=i+"px";var r=i-n[1].offsetWidth/2;n[1].style.left=r+"px"},lyric:function(t){this.$parent.$el.querySelector("audio"),this.$el.getElementsByClassName("control-bar"),this.$el.getElementsByClassName("dragPoint"),this.$el.getElementsByClassName("progress")},currentSong:function(t){this.getLyric()},showPlayList:function(t){this.$emit("trans-list-state",this.showPlayList),this.showPlayList&&this.show?(console.log("xxx"),document.body.style.overflow="hidden"):!this.showPlayList&&this.show&&(console.log("ggg"),document.body.style.overflow="hidden")},songIndex:function(t){this.p_SongIndex=t},playWay:function(t){switch(this.p_PlayWay=t,this.p_PlayWay){case 1:this.playWayIcon=n("4c22");break;case 2:this.playWayIcon=n("60ae");break;case 3:this.playWayIcon=n("a36d");break;default:break}this.$emit("change-play-way",this.p_PlayWay)}}}),i=o,r=(n("242f"),n("2877")),c=Object(r["a"])(i,e,a,!1,null,"484f49f2",null);s["default"]=c.exports},1038:function(t,s,n){t.exports=n.p+"img/stop.e62060c8.svg"},1700:function(t,s,n){},2395:function(t,s,n){},"242f":function(t,s,n){"use strict";var e=n("eca5"),a=n.n(e);a.a},2610:function(t,s,n){t.exports=n.p+"img/PlayList.bc8098de.svg"},"27d6":function(t,s,n){"use strict";var e=n("efe0"),a=n.n(e);a.a},"29b3":function(t,s,n){t.exports=n.p+"img/hot_music_bg_2x.f01a2523.jpg"},"2ee5":function(t,s,n){t.exports=n.p+"img/error.667930a8.svg"},3864:function(t,s,n){"use strict";n.r(s);var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",{attrs:{id:"nav"}},[n("li",[n("router-link",{staticClass:"nav",attrs:{to:"/"}},[t._v("推荐音乐")])],1),n("li",[n("router-link",{staticClass:"nav",attrs:{to:"/hot"}},[t._v("热歌榜")])],1),n("li",[n("router-link",{staticClass:"nav",attrs:{to:"/search"}},[t._v("搜索")])],1)])},a=[],o={},i=o,r=n("2877"),c=Object(r["a"])(i,e,a,!1,null,"4710c170",null);s["default"]=c.exports},"3f60":function(t,s,n){t.exports=n.p+"img/play2.1f23dc98.svg"},"40a3":function(t,s,n){t.exports=n.p+"img/stop2.330818f1.svg"},"42a1":function(t,s,n){"use strict";var e=n("d0d4"),a=n.n(e);a.a},"4a60":function(t,s,n){},"4c22":function(t,s,n){t.exports=n.p+"img/order2.6d35b4fe.svg"},"4f34":function(t,s,n){"use strict";n.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"player"},[e("div",{staticClass:"info-scope",on:{click:function(s){t.show=!t.show}}},[e("img",{staticClass:"rotate",class:{active:t.isPlay},attrs:{src:t.imgUrl(t.songInfo),alt:""}}),""!=t.songInfo?e("div",{staticClass:"songInfo"},[e("h5",{staticClass:"s-name"},[t._v(t._s(t.songName(t.songInfo)))]),e("span",{staticClass:"author"},[t._v(t._s(t.songAuthor(t.songInfo)))])]):t._e()]),e("div",{staticClass:"control"},[e("canvas",{attrs:{id:"play-progress",width:"27",height:"27"},on:{click:t.changePlayStatus}}),t.isPlay?e("img",{attrs:{src:n("1038")}}):e("img",{attrs:{src:n("5830"),alt:""}}),e("img",{attrs:{src:n("2610"),alt:""},on:{click:function(s){t.showPlayList=!t.showPlayList}}})]),e("audio",{staticStyle:{display:"none"},attrs:{src:t.songUrl,controls:""}}),e("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated fadeInUp","leave-active-class":"animated fadeOutDown"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showPlayList,expression:"showPlayList"}],staticClass:"mask",on:{touchstart:function(s){t.showPlayList=!t.showPlayList}}})]),e("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated fadeInUp","leave-active-class":"animated fadeOutDown"}},[e("CurrentPlayList",{directives:[{name:"show",rawName:"v-show",value:t.showPlayList,expression:"showPlayList"}],attrs:{newSongsData:t.newSongsData,currentSongInfo:t.songInfo,showPlayList:t.showPlayList,playWay:t.playWay},on:{"tran-song-id":function(s){return t.$parent.getCurrentSongUrl(s)},"change-play-way":function(s){t.playWay=s}}})],1),e("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated fadeInUp","leave-active-class":"animated fadeOutDown"}},[e("BaseMusicPlayer",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{currentSong:t.songInfo,imgUrl:t.imgUrl(t.songInfo),songName:t.songName(t.songInfo),songAuthor:t.songAuthor(t.songInfo),show:t.show,isPlay:t.isPlay,showPlayList:t.showPlayList,playWay:t.playWay,songIndex:t.songIndex,newSongsData:t.newSongsData},on:{close:function(s){return t.closeWindow(s)},"trans-list-state":function(s){t.showPlayList=s},"change-play-way":function(s){t.playWay=s},"trans-song-index":function(s){t.c_SongIndex=s}}})],1)],1)},a=[],o=(n("b0c0"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"current-play-list"},[e("header",[e("h3",[e("span",[t._v("当前播放")]),e("span",[t._v(t._s("("+t.newSongsData.length+")"))])]),e("div",{staticClass:"playway",on:{click:t.switchPlayWay}},[e("img",{attrs:{src:t.playWayIcon,alt:""}}),e("span",[t._v(t._s(t.playWayText))])])]),e("ul",{staticClass:"playlist"},t._l(t.newSongsData,(function(s,a){return e("li",{key:a},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.currentSongInfo.id==s.id,expression:"currentSongInfo.id == item.id"}],staticClass:"fa fa-volume-up",staticStyle:{color:"red"}}),e("div",{staticClass:"songInfo",on:{click:function(n){return t.playIndex(s,a)}}},[e("span",{class:t.currentSongInfo.id==s.id?"playing":""},[t._v(t._s(s.name||s.song.name||s.al.name))]),e("span",{class:t.currentSongInfo.id==s.id?"playing":""},[t._v("-"+t._s(t.getArticleInfo(s)))])]),e("img",{attrs:{src:n("2ee5"),alt:""}})])})),0)])}),i=[],r=(n("a15b"),n("d81d"),{name:"CurrentPlayList",props:["newSongsData","currentSongInfo","playWay"],data:function(){return{playList:this.newSongsData,songIndex:"",l_PlayWay:1,playWayIcon:n("c93c"),playWayText:"列表循环"}},components:{},methods:{switchPlayWay:function(){switch(this.l_PlayWay>=3?this.l_PlayWay=1:this.l_PlayWay++,this.l_PlayWay){case 1:this.playWayIcon=n("c93c"),this.playWayText="列表循环";break;case 2:this.playWayIcon=n("a4e3"),this.playWayText="单曲循环";break;case 3:this.playWayIcon=n("dd6e"),this.playWayText="随机播放";break;default:break}this.$emit("change-play-way",this.l_PlayWay)},getArticleInfo:function(t){return t.song?t.song.artists.map((function(t){return t.name})).join("/"):t.ar?t.ar.map((function(t){return t.name})).join("/"):t.artists?t.artists.map((function(t){return t.name})).join("/"):void 0},playIndex:function(t,s){this.$emit("tran-song-id",t),console.log(s)}},watch:{currentSongInfo:function(t){console.log("当前歌曲",t)},playWay:function(t){switch(this.l_PlayWay=t,this.l_PlayWay){case 1:this.playWayIcon=n("c93c"),this.playWayText="列表循环";break;case 2:this.playWayIcon=n("a4e3"),this.playWayText="单曲循环";break;case 3:this.playWayIcon=n("dd6e"),this.playWayText="随机播放";break;default:break}}},mounted:function(){}}),c=r,l=(n("eb64"),n("2877")),u=Object(l["a"])(c,o,i,!1,null,"dfc79718",null),d=u.exports,g={props:["songUrl","songInfo","newSongsData","songIndex"],created:function(){},components:{CurrentPlayList:d},data:function(){return{scroll:!1,c_SongIndex:this.songIndex,playWay:1,isPlay:!1,show:!1,showPlayList:!1,defalutPic:"../../assets/defaultImg.png",currentSongInfo:this.songInfo}},computed:{},methods:{imgUrl:function(t){return t.picUrl?t.picUrl:t.al?t.al.picUrl:t.artists?t.artists[0].img1v1Url:void 0},songName:function(t){return t.song?this.songInfo.song.name:t.al||t?t.name:void 0},songAuthor:function(t){return t.song?t.song.artists[0].name:t.ar?t.ar[0].name:t.artists?t.artists[0].name:void 0},changePlayStatus:function(){this.isPlay=!this.isPlay,console.log(this.$el.querySelector("audio")),this.isPlay?this.$el.querySelector("audio").play():this.$el.querySelector("audio").pause(),console.log(this.isPlay)},closeWindow:function(t){this.show=t},drawProgress:function(){var t=this.$el.querySelector("audio"),s=this.$el.querySelector("canvas"),n=s.getContext("2d"),e=this;t.onloadstart=function(){e.isPlay=!1},t.oncanplay=function(){t.play(),e.isPlay=!0},t.onplay=function(){e.isPlay=!0},t.onpause=function(){e.isPlay=!1},t.ontimeupdate=function(){var s=this.currentTime/this.duration*100/50;if(n.clearRect(0,0,30,30),e.isPlay?(n.beginPath(),n.strokeStyle="#888888",n.lineWidth=1,n.arc(13.5,13.5,12.5,0,2*Math.PI),n.stroke(),n.closePath()):e.isPlay||(n.beginPath(),n.strokeStyle="#414141",n.lineWidth=1,n.arc(13.5,13.5,12.5,0,2*Math.PI),n.stroke(),n.closePath()),n.beginPath(),n.strokeStyle="#FF0000",n.lineWidth=.8,n.arc(13.5,13.5,12.5,0,s*Math.PI),n.stroke(),n.closePath(),t.ended){switch(e.playWay){case 1:e.c_SongIndex>=e.newSongsData.length-1?e.c_SongIndex=0:e.c_SongIndex++,e.$emit("tran-song-index",e.c_SongIndex);break;case 2:e.c_SongIndex,t.play();break;case 3:e.c_SongIndex=Math.floor(Math.random()*e.newSongsData.length),e.$emit("tran-song-index",e.c_SongIndex);break}console.log(e.c_SongIndex)}}}},mounted:function(){this.drawProgress()},watch:{showPlayList:function(t){this.showPlayList?document.body.style.overflow="hidden":document.body.style.overflow=""},c_SongIndex:function(t){this.$emit("trans-song-index",t)},songIndex:function(t){this.c_SongIndex=t},show:function(){document.body.style.overflow=""}}},f=g,h=(n("a81e"),Object(l["a"])(f,e,a,!1,null,"22c36c68",null));s["default"]=h.exports},"56d7":function(t,s,n){"use strict";n.r(s);n("4160"),n("d3b7"),n("ac1f"),n("5319"),n("1276"),n("159b"),n("ddb0"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var e=n("2b0e"),a=n("bc3a"),o=n.n(a),i={baseURL:"https://music.kele8.cn"},r=o.a.create(i);r.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),r.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t){t.axios=r,window.axios=r,Object.defineProperties(t.prototype,{axios:{get:function(){return r}},$axios:{get:function(){return r}}})},e["a"].use(Plugin);Plugin;var c=n("8c4f"),l=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[t.showLoading?e("div",{staticClass:"loading"},[e("img",{attrs:{src:n("803f"),alt:""}})]):t._e(),e("BaseHomeLink"),e("div",{staticClass:"personlized"},[e("CardTitle",{staticClass:"card-title"},[t._v("推荐歌单")]),e("div",{staticClass:"personlized-list"},t._l(t.randomPersonlizeds(),(function(t,s){return e("SongListCard",{key:s,staticClass:"songlistcard",attrs:{item:t}})})),1)],1),e("div",{staticClass:"newsong",class:[t.currentSongInfo?"margin-bottom-40px":""]},[e("CardTitle",{staticClass:"card-title"},[t._v("最新音乐")]),t._l(t.newsongs,(function(s,n){return e("NewSongItem",{key:n,ref:"childs",refInFor:!0,attrs:{item:s,newsongs:t.newsongs,currentSongInfo:t.currentSongInfo},nativeOn:{click:function(e){return t.sendSongId(s,n,t.newsongs)}}})}))],2)],1)},u=[],d=(n("fb6a"),n("b0c0"),n("2909")),g=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"title"},[n("h3",[t._t("default")],2)])},f=[],h={},p=h,y=(n("27d6"),n("2877")),m=Object(y["a"])(p,g,f,!1,null,"6306e041",null),v=m.exports,w=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("li",{staticClass:"card",on:{click:function(s){return t.routerPlayListPage(t.item.id,t.playCount)}}},[n("div",{staticClass:"thumb"},[n("img",{attrs:{src:t.item.picUrl,alt:""}}),n("span",[n("i",{staticClass:"fa fa-headphones",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.playCount)+" ")])]),n("h5",[t._v(t._s(t.item.name))])])},S=[],_=(n("b680"),n("25f0"),{data:function(){return{playCount:""}},props:{item:{type:Object,default:function(){return{id:4969079749,type:0,name:"欧美 | 欢快小调拯救你的不开心",copywriter:"编辑推荐：音乐是治愈人心的良药",picUrl:"https://p2.music.126.net/nflx5ZxSSPivvGnyS5WRGw==/109951164906376339.jpg",canDislike:!1,trackNumberUpdateTime:1586934907095,playCount:1209355,trackCount:100,highQuality:!1,alg:"featured"}}}},methods:{getPlayCount:function(t){return t.toString().length>=9?(t/1e8).toFixed(1)+"亿":(t/1e4).toFixed(1)+"万"},routerPlayListPage:function(t,s){this.$router.push({path:"/playlist",query:{id:t,playcount:s}})}},created:function(){this.playCount=this.getPlayCount(this.item.playCount)}}),C=_,x=(n("a423"),Object(y["a"])(C,w,S,!1,null,"a3073732",null)),I=x.exports,b=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",{staticClass:"list"},[n("li",{staticClass:"song-item"},[n("div",{staticClass:"top"},[n("div",{staticClass:"song-name"},[t._v(" "+t._s(t.item.name)+" "),n("span",{staticClass:"desc",attrs:{title:t.item.song.alias?t.item.song.alias[0]:""}},[t._v(t._s(t.item.song.alias?t.item.song.alias[0]:""))])])]),n("p",{staticClass:"bottom"},[n("i",{staticClass:"icon icon-quality"}),n("span",[t._v(t._s(t.getArticleInfo(t.item)))])])]),n("i",{class:[t.currentSongInfo.id==t.item.id?t.playing:t.pause]})])},P=[],L=(n("a15b"),n("d81d"),{name:"NewSongItem",props:["item","isplay","newsongs","currentSongInfo"],data:function(){return{playing:{fa:!0,"fa-volume-up":!0},pause:{icon:!0,"icon-play":!0}}},methods:{getArticleInfo:function(t){return t.song.artists.map((function(t){return t.name})).join("/")+"-"+t.song.album.name}}}),k=L,D=(n("6ca7"),Object(y["a"])(k,b,P,!1,null,"517f8bd4",null)),W=D.exports,$={name:"Home",data:function(){return{showLoading:"",personalized:[],newsongs:[]}},props:["currentSongInfo"],components:{CardTitle:v,SongListCard:I,NewSongItem:W},methods:{getPersonalized:function(){var t=this;this.end=this.end+6,console.log(this.end),this.axios.get("/personalized").then((function(s){console.log("缓存失效,Ajax重新获取歌单");var n=s.data.result;t.personalized=n,window.localStorage.setItem("personalized",JSON.stringify({expire:Date.now()+1728e4,result:s.data.result})),n.forEach((function(t,s){console.log("今日歌单",t.name,s)})),t.updatePersonalizeds++})).catch((function(t){console.log(t)}))},sendSongId:function(t,s,n){console.log(t.id),this.$emit("tran-song-id",t),this.$emit("tran-song-data",n)},getNewSong:function(){var t=this;this.axios.get("/personalized/newsong").then((function(s){t.newsongs=s.data.result,window.localStorage.setItem("newsong",JSON.stringify({expire:Date.now()+1728e4,result:s.data.result}))})).catch((function(t){console.log(t)}))},randomPersonlizeds:function(){return Object(d["a"])(this.personalized).slice(0,6)}},created:function(){console.log("Home被创建");var t=JSON.parse(window.localStorage.getItem("personalized"));t&&t.expire>Date.now()?(this.personalized=t.result,console.log("从缓存中获取推荐歌单数据")):this.getPersonalized();var s=JSON.parse(window.localStorage.getItem("newsong"));s&&s.expire>Date.now()?(this.newsongs=s.result,console.log("从缓存中获取推荐音乐数据")):this.getNewSong()},beforeRouteEnter:function(t,s,n){n((function(t){t.showLoading=!1}))},beforeRouteLeave:function(t,s,n){this.showLoading=!0,n()}},O=$,N=(n("66c1"),Object(y["a"])(O,l,u,!1,null,"56ec9f7b",null)),E=N.exports,j=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"playlist"},[n("header",{staticClass:"header"},[n("i",{staticClass:"fa fa-arrow-left",on:{click:t.returnLastRouter}}),n("div",{staticClass:"mask",style:{backgroundImage:"url("+t.songListDetail.coverImgUrl+")"}}),n("div",{staticClass:"left"},[n("img",{attrs:{src:t.songListDetail.coverImgUrl,alt:""}}),n("span",[n("i",{staticClass:"fa fa-headphones",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.playCount)+" ")]),n("i",{staticClass:"gedan-icon"},[t._v("歌单")])]),n("div",{staticClass:"right"},[n("h2",[t._v(t._s(t.songListDetail.name))]),n("div",{staticClass:"actor"},[n("img",{attrs:{src:t.songListDetail?t.songListDetail.creator.avatarUrl:"",alt:""}}),n("span",[t._v(t._s(t.songListDetail?t.songListDetail.creator.nickname:""))])])])]),n("div",{staticClass:"info"},[""!=t.tags?n("div",{staticClass:"tags"},[n("label",[t._v("标签：")]),t._l(t.tags,(function(s,e){return n("span",{key:e},[t._v(t._s(s))])}))],2):t._e(),n("div",{on:{click:function(s){return t.ctlDescHidden()}}},[n("div",{class:t.descClass},[t._v("简介："+t._s(t.songListDetail.description))]),n("i",{staticClass:"fa drop-down",class:[t.descClass.hidden?"fa-angle-down":"fa-angle-up"]})])]),n("div",{staticClass:"songList",class:[t.currentSongInfo?"margin-bottom-40px":""]},[n("p",{staticClass:"title"},[t._v("歌曲列表")]),t._l(t.songListDetail.tracks,(function(s,e){return n("li",{key:e,staticClass:"song-item",on:{click:function(n){return t.sendDataToControler(s,t.songListDetail.tracks)},touchstart:function(s){t.playing=!t.playing}}},[n("div",{staticClass:"index"},[t._v(t._s(e+1))]),n("div",{staticClass:"songinfo"},[n("div",{staticClass:"top"},[n("div",{staticClass:"song-name"},[t._v(" "+t._s(s.name)+" "),n("span",{staticClass:"desc",attrs:{title:s.alia[0]}},[t._v(t._s(s.alia[0]))])])]),n("p",{staticClass:"bottom"},[n("span",[t._v(t._s(t.getArticleInfo(s)))])]),t.currentSongInfo&&t.currentSongInfo.id==s.id?n("i",{staticClass:"fa fa-volume-up"}):n("i",{staticClass:"icon icon-play"})])])}))],2)])},U=[],T={name:"PlayList",data:function(){return{playing:!1,songListId:this.$route.query.id,playCount:this.$route.query.playcount,songListDetail:"",tags:[],descClass:{hidden:!0,description:!0}}},props:["currentSongInfo"],methods:{getSongListDetail:function(){var t=this;this.axios.get("/playlist/detail",{params:{id:this.songListId}}).then((function(s){t.songListDetail=s.data.playlist,t.tags=s.data.playlist.tags,window.localStorage.setItem("sl-"+t.$route.query.id,JSON.stringify({expire:3*Date.now()*60*60*1e3,result:s.data.playlist}))})).catch((function(t){console.log(t)}))},ctlDescHidden:function(){this.descClass.hidden=!this.descClass.hidden},getArticleInfo:function(t){return t.ar.map((function(t){return t.name})).join("/")+"-"+t.al.name},returnLastRouter:function(){this.$router.go(-1)},sendDataToControler:function(t,s){console.log(t,s),this.$emit("tran-song-id",t),this.$emit("tran-song-data",s)}},beforeRouteEnter:function(t,s,n){var e=JSON.parse(window.localStorage.getItem("sl-".concat(t.query.id)));if(e&&e.expire>Date.now()){console.log("从缓存取出数据");var a=e.result,o=a.tags;n((function(s){s.songListId=t.query.id,s.songListDetail=a,s.tags=o}))}else window.axios.get("/playlist/detail",{params:{id:t.query.id}}).then((function(s){console.log(s);var e=s.data.playlist,a=s.data.playlist.tags;n((function(s){s.songListId=t.query.id,s.songListDetail=e,s.tags=a})),window.localStorage.setItem("sl-"+t.query.id,JSON.stringify({expire:3*Date.now()*60*60*1e3,result:s.data.playlist}))})).catch((function(t){console.log(t)}))}},M=T,B=(n("da99"),Object(y["a"])(M,j,U,!1,null,"22e812c6",null)),q=B.exports,A=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"hot",class:[t.currentSongInfo?"margin-bottom-40px":""]},[n("BaseHomeLink"),t._m(0),n("ul",{staticClass:"list"},t._l(t.hotSongs.tracks,(function(s,e){return n("li",{key:e,staticClass:"song-item",on:{click:function(n){return t.sendSongId(s,t.hotSongs.tracks)}}},[e+1<10?n("div",{staticClass:"index",class:[e+1<=3?"red":""]},[t._v(t._s("0"+(e+1)))]):n("div",{staticClass:"index"},[t._v(t._s(e+1))]),n("div",{staticClass:"songinfo"},[n("div",{staticClass:"top"},[n("div",{staticClass:"song-name"},[t._v(" "+t._s(s.name)+" "),n("span",{staticClass:"desc",attrs:{title:s.alias?s.alias[0].name:""}},[t._v(t._s(s.alias?s.alias[0].name:""))])])]),n("p",{staticClass:"bottom"},[n("i",{staticClass:"icon icon-quality"}),n("span",[t._v(t._s(t.getArticleInfo(s)))])]),n("i",{class:[t.currentSongInfo.id==s.id?t.playing:t.pause]})])])})),0)],1)},H=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"title-img"},[e("img",{attrs:{src:n("29b3"),alt:""}}),e("div",{staticClass:"hot-desc"}),e("span")])}],z={data:function(){return{hotSongs:null,playing:{fa:!0,"fa-volume-up":!0},pause:{icon:!0,"icon-play":!0}}},props:["currentSongInfo"],methods:{getHotSongList:function(){var t=this;this.axios.get("/top/list",{params:{idx:1}}).then((function(s){t.hotSongs=s.data.playlist,window.localStorage.setItem("hotsong",JSON.stringify({expire:3*Date.now()*60*60*1e3,result:s.data.playlist}))})).catch((function(t){console.log(t)}))},getArticleInfo:function(t){return t.ar.map((function(t){return t.name})).join("/")+"-"+t.al.name},sendSongId:function(t,s){this.$emit("tran-song-id",t),this.$emit("tran-song-data",s)}},created:function(){var t=JSON.parse(window.localStorage.getItem("hotsong"));t&&t.expire>Date.now()?(this.hotSongs=t.result,console.log("从缓存中获取热歌榜数据")):this.getHotSongList()}},J=z,R=(n("f2ac"),Object(y["a"])(J,A,H,!1,null,"42641aa8",null)),F=R.exports,X=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"search"},[e("BaseHomeLink"),e("div",{staticClass:"search-box"},[e("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.keywords,expression:"keywords"}],attrs:{type:"text",placeholder:"搜索歌曲、歌手、专辑"},domProps:{value:t.keywords},on:{click:function(s){t.searchSongsData=""},input:function(s){s.target.composing||(t.keywords=s.target.value)}}}),e("div",{staticClass:"delete"},[t.keywords?e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"},on:{click:function(s){t.keywords=""}}}):t._e()])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.searchSongsData,expression:"!searchSongsData"}],staticClass:"data"},[e("div",[t.keywords?t._e():e("div",{staticClass:"hot-search"},[e("h5",[t._v("热门搜索")]),e("div",{staticClass:"tags"},t._l(t.hotSearch,(function(s,n){return e("span",{key:n,on:{click:function(n){return t.getSongList(s.first)}}},[t._v(t._s(s.first))])})),0)]),t.keywords?e("h3",[t._v("搜索"+t._s("“"+t.keywords+"”"))]):t._e(),t.keywords?e("ul",{staticClass:"search-suggestions"},t._l(t.suggestions,(function(s,n){return e("li",{key:n,on:{click:function(n){return t.getSongList(s.keyword)}}},[e("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(s.keyword)+" ")])})),0):t._e(),t.keywords?t._e():e("ul",{staticClass:"search-history"},t._l(t.history,(function(s,a){return e("li",{key:a},[e("div",{staticClass:"time"}),e("img",{staticClass:"clock",attrs:{src:n("f490"),alt:""}}),e("div",{staticClass:"history-info"},[e("span",{on:{click:function(n){return t.getSongList(s)}}},[t._v(t._s(s))]),e("img",{attrs:{src:n("2ee5"),alt:""},on:{click:function(n){return t.deleteHistoryMsg(s)}}})])])})),0)])]),t.searchSongsData?e("ul",{staticClass:"list",class:[t.currentSongInfo?"margin-bottom-40px":""]},t._l(t.searchSongsData,(function(s,n){return e("li",{key:n,staticClass:"song-item",on:{click:function(n){return t.play(s)}}},[e("div",{staticClass:"top"},[e("div",{staticClass:"song-name"},[t._v(" "+t._s(s.name)+" "),e("span",{staticClass:"desc",attrs:{title:s.alias?s.alias[0]:""}},[t._v(t._s(s.alias?s.alias[0]:""))])])]),e("p",{staticClass:"bottom"},[e("i",{staticClass:"icon icon-quality"}),e("span",[t._v(t._s(t.getArticleInfo(s)))])]),e("i",{class:[t.currentSongInfo.id==s.id?t.playing:t.pause]})])})),0):t._e()],1)},G=[],V=(n("a434"),{data:function(){return{keywords:"",suggestions:"",hotSearch:"",searchSongsData:"",playing:{fa:!0,"fa-volume-up":!0},pause:{icon:!0,"icon-play":!0},history:[]}},props:["currentSongInfo"],methods:{getArticleInfo:function(t){return t.artists.map((function(t){return t.name})).join("/")+"-"+t.album.name},play:function(t){console.log(this.$parent.newSongsData),this.$parent.newSongsData.push(t),console.log(this.$parent.newSongsData),this.$emit("tran-song-id",t)},translateMsg:function(t){var s=this;this.axios.get("/search/suggest",{params:{keywords:t,type:"mobile"}}).then((function(t){console.log(t),s.suggestions=t.data.result.allMatch})).catch((function(t){console.log(t)}))},getSongList:function(t){var s=this;this.loading=!0,this.axios.get("/search",{params:{keywords:t}}).then((function(t){console.log(t),s.searchSongsData=t.data.result.songs,s.loading=!1})).catch((function(t){console.log(t)}));var n=!1;this.history.forEach((function(s,e){s==t&&(n=!0)})),n||this.history.push(t),window.localStorage.setItem("history",this.history)},deleteHistoryMsg:function(t){var s=this;this.history.forEach((function(n,e){n==t&&s.history.splice(e,1)})),console.log(this.history),window.localStorage.setItem("history",this.history)}},created:function(){var t=this;this.axios.get("/search/hot").then((function(s){console.log(s),t.hotSearch=s.data.result.hots})).catch((function(t){console.log(t)}));var s=window.localStorage.getItem("history");if(console.log(s),s){var n=s.split(",");this.history=n}},watch:{keywords:function(t){this.translateMsg(t)}}}),Q=V,Y=(n("42a1"),Object(y["a"])(Q,X,G,!1,null,"0502f505",null)),Z=Y.exports;e["a"].use(c["a"]);var K=[{path:"/",name:"Home",component:E},{path:"/playlist",name:"PlayList",component:q},{path:"/hot",name:"Hot",component:F},{path:"/search",name:"Search",component:Z}],tt=new c["a"]({routes:K}),st=tt,nt=n("8103"),et=n.n(nt),at=n("bba4"),ot=n.n(at),it=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{attrs:{id:"app"}},[n("router-view",{attrs:{currentSongInfo:t.currentSongInfo},on:{"tran-song-id":function(s){return t.getCurrentSongUrl(s)},"tran-song-data":function(s){t.newSongsData=s}}}),""!=t.currentSongUrl?n("BaseMusicControler",{attrs:{songUrl:t.currentSongUrl,songInfo:t.currentSongInfo,newSongsData:t.newSongsData,songIndex:t.songIndex},on:{"trans-song-index":function(s){t.songIndex=s}}}):t._e()],1)},rt=[],ct={data:function(){return{currentSongInfo:"",currentSongUrl:"",newSongsData:[],songIndex:""}},methods:{getCurrentSongUrl:function(t){this.currentSongInfo=t,this.currentSongUrl="https://music.163.com/song/media/outer/url?id=".concat(t.id,".mp3"),console.log(this.currentSongUrl)}},mounted:function(){window.onload=function(){console.log("应用创建")}},created:function(){},watch:{currentSongInfo:function(t){var s=this;console.log(this.currentSongInfo),t&&this.newSongsData.forEach((function(t,n){s.currentSongInfo==t&&(console.log(n),s.songIndex=n)})),console.log(t)},songIndex:function(t){this.getCurrentSongUrl(this.newSongsData[t])}}},lt=ct,ut=(n("7c55"),Object(y["a"])(lt,it,rt,!1,null,null,null)),dt=ut.exports;e["a"].config.productionTip=!1;var gt=n("98f1");gt.keys().forEach((function(t){var s=gt(t),n=et()(ot()(t.split("/").pop().replace(/\.\w+$/,"")));e["a"].component(n,s.default||s)})),new e["a"]({router:st,render:function(t){return t(dt)}}).$mount("#app")},5830:function(t,s,n){t.exports=n.p+"img/play.d9a8cc1b.svg"},"60ae":function(t,s,n){t.exports=n.p+"img/loop2.1d284e2e.svg"},"66c1":function(t,s,n){"use strict";var e=n("8113"),a=n.n(e);a.a},"6ba1":function(t,s,n){},"6ca7":function(t,s,n){"use strict";var e=n("bcdc"),a=n.n(e);a.a},"7c55":function(t,s,n){"use strict";var e=n("2395"),a=n.n(e);a.a},"803f":function(t,s,n){t.exports=n.p+"img/playing.8892a2b6.svg"},8113:function(t,s,n){},"89a0":function(t,s,n){},9336:function(t,s,n){t.exports=n.p+"img/prev.0ce571ee.svg"},"98f1":function(t,s,n){var e={"./BaseComponents/BaseHomeLink.vue":"3864","./BaseComponents/BaseMusicControler.vue":"4f34","./BaseComponents/BaseMusicPlayer.vue":"0e08"};function a(t){var s=o(t);return n(s)}function o(t){if(!n.o(e,t)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e[t]}a.keys=function(){return Object.keys(e)},a.resolve=o,t.exports=a,a.id="98f1"},a36d:function(t,s,n){t.exports=n.p+"img/random2.7b50885e.svg"},a423:function(t,s,n){"use strict";var e=n("6ba1"),a=n.n(e);a.a},a4e3:function(t,s,n){t.exports=n.p+"img/loop.1e3ff3fe.svg"},a4eb:function(t,s,n){t.exports=n.p+"img/PlayList2.7e58c8e7.svg"},a81e:function(t,s,n){"use strict";var e=n("a921"),a=n.n(e);a.a},a921:function(t,s,n){},b2f3:function(t,s,n){t.exports=n.p+"img/next.ce6099ec.svg"},bcdc:function(t,s,n){},c93c:function(t,s,n){t.exports=n.p+"img/order.fcc5de72.svg"},ce19:function(t,s,n){t.exports=n.p+"img/needle.702cf6d9.png"},d0d4:function(t,s,n){},da99:function(t,s,n){"use strict";var e=n("1700"),a=n.n(e);a.a},dd6e:function(t,s,n){t.exports=n.p+"img/random.cbf38105.svg"},de4e:function(t,s,n){t.exports=n.p+"img/disc-ip6.69796123.png"},eb64:function(t,s,n){"use strict";var e=n("4a60"),a=n.n(e);a.a},eca5:function(t,s,n){},efe0:function(t,s,n){},f2ac:function(t,s,n){"use strict";var e=n("89a0"),a=n.n(e);a.a},f490:function(t,s,n){t.exports=n.p+"img/time.ac6e7648.svg"}});
//# sourceMappingURL=app.a6bea0c3.js.map